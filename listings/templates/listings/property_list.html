{% extends 'listings/base.html' %}
{% load humanize %}

{% block title %}매물 목록 - Better My house{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>매물 목록</h2>

    <div class="region-nav my-4">
        <ul class="nav nav-pills justify-content-center">
            <li class="nav-item">
                <a class="nav-link {% if not selected_region %}active{% endif %}" href="{% url 'listings:property_index' %}">전체</a>
            </li>
            {% for region_value, region_display in regions %}
            <li class="nav-item">
                <a class="nav-link {% if selected_region == region_value %}active{% endif %}" href="?region={{ region_value }}">{{ region_display }}</a>
            </li>
            {% endfor %}
        </ul>
    </div>

    <div class="property-list grid grid-cols-3 gap-4">
        {% for property in properties %}
        <div class="property-card border rounded p-3 shadow">
            {% if property.image %}
            <img src="{{ property.image.url }}" alt="{{ property.title }}" class="property-thumbnail">

            {% endif %}
            <h3 class="text-lg font-bold mt-2">{{ property.title }}</h3>
                        <p class="card-text">{{ property.description|truncatechars:100 }}</p>
                        {% if user.is_authenticated and user == property.author %}
                        <a href="{% url 'listings:property_update' property.id %}" class="btn btn-primary btn-sm">수정</a>
                        <a href="{% url 'listings:property_delete' property.id %}" class="btn btn-danger btn-sm">삭제</a>
                        {% endif %}
                    </div>
        {% empty %}
        <p>등록된 매물이 없습니다.</p>
        {% endfor %}
    </div>
<<<<<<< HEAD
=======
    {% empty %}
    <p>등록된 매물이 없습니다.</p>
    {% endfor %}
</div>

<div class="row g-5">
    <div class="col-md-4">
        <div class="info-section">
            <h4><a href="{% url 'announcements:news' %}">부동산 뉴스</a></h4>
            <ul class="list-unstyled">
                {% for item in news_list %}
                <li>
                    <a href="#">{{ item.title|truncatechars:25 }}</a>
                    <span class="date">{{ item.date|date:"m.d" }}</span>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <div class="col-md-4">
        <div class="info-section">
            <h4><a href="{% url 'weather:weather' %}">오늘의 날씨</a></h4>
            <ul class="list-unstyled">
                {% for item in weather_list %}
                <li class="d-flex align-items-center mb-2">
                    <i class="{{ item.icon }} fa-fw me-2 text-muted"></i>
                    <span>{{ item.location }}: {{ item.temp }}, {{ item.condition }}</span>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <div class="col-md-4">
        <div class="info-section">
            <h4><a href="{% url 'announcements:announcements' %}">공지사항</a></h4>
            <ul class="list-unstyled">
                {% for item in announcements_list %}
                <li>
                    <a href="{% url 'announcements:announcement_detail' item.pk %}">{{ item.title }}</a>
                    <span class="date">{{ item.created_at|date:"m.d" }}</span>
                </li>
                {% empty %}
                <li>공지사항이 없습니다.</li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
>>>>>>> 25cc832a5e9f607f3748accc0875bcf78ecc5628
</div>
{% endblock %}