{% extends 'listings/base.html' %}
{% load humanize %}

{% block title %}매물 목록 - Better My house{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>매물 목록</h2>

    <div class="region-nav my-4">
        <ul class="nav nav-pills justify-content-center">
            <li class="nav-item">
                <a class="nav-link {% if not selected_region %}active{% endif %}" href="{% url 'listings:property_index' %}">전체</a>
            </li>
            {% for region_value, region_display in regions %}
            <li class="nav-item">
                <a class="nav-link {% if selected_region == region_value %}active{% endif %}" href="?region={{ region_value }}">{{ region_display }}</a>
            </li>
            {% endfor %}
        </ul>
    </div>

    <div class="property-list grid grid-cols-3 gap-4">
        {% for property in properties %}
        <div class="property-card border rounded p-3 shadow">
            {% if property.image %}
            <img src="{{ property.image.url }}" alt="{{ property.title }}" class="w-full h-48 object-cover rounded">
            {% endif %}
            <h3 class="text-lg font-bold mt-2">{{ property.title }}</h3>
            <p>{{ property.description|truncatewords:20 }}</p>
            <p>지역: {{ property.region }}</p>
            <p>가격:
                {% if property.price %}
                {{ property.price|intcomma }} 원
                {% else %}
                가격 미정
                {% endif %}
            </p>
            <a href="{% url 'listings:property_detail' property.pk %}" class="text-blue-500">상세보기</a>
        </div>
        {% empty %}
        <p>등록된 매물이 없습니다.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}