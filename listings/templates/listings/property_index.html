{% extends "base.html" %}
{% load humanize %}   {# 숫자 포맷용 humanize 로드 #}

{% block content %}
<h2>매물 목록</h2>

<div class="property-list grid grid-cols-3 gap-4">
    {% for property in properties %}
    <div class="property-card border rounded p-3 shadow">
        {% if property.image %}
        <img src="{{ property.image.url }}" alt="{{ property.title }}" class="w-full h-48 object-cover rounded">
        {% endif %}
        <h3 class="text-lg font-bold mt-2">{{ property.title }}</h3>
        <p>{{ property.description|truncatewords:20 }}</p>
        <p>지역: {{ property.region }}</p>
        <p>위도: {{ property.latitude }}, 경도: {{ property.longitude }}</p>
        <p>작성자: {{ property.author.username }}</p>
        <p>가격:
            {% if property.price %}
                {{ property.price|intcomma }} 원
            {% else %}
                가격 미정
            {% endif %}
        </p>
        <a href="{% url 'properties:property_detail' property.pk %}" class="text-blue-500">상세보기</a>
    </div>
    {% empty %}
    <p>등록된 매물이 없습니다.</p>
    {% endfor %}
</div>
{% endblock %}
